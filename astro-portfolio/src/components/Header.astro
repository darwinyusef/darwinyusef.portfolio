---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<header
  class="p-4 flex justify-between items-center sticky top-0 z-50 bg-background-dark/80 backdrop-blur-sm border-b border-gray-700/50"
>
  <a
    href={`/${lang === "es" ? "" : lang}`}
    class="flex items-center gap-3 group"
  >
    <div class="hidden sm:flex flex-col leading-tight">
      <span
        class="text-xs font-semibold text-gray-400 uppercase tracking-wider"
        >Portafolio</span
      >
      <span
        class="mt-[-10px] ml-[-2px] text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-primary via-purple-600 to-pink-600"
        style="font-family: 'Inter Tight', system-ui, sans-serif;"
      >
        @DARWINYUSEF
      </span>
    </div>
  </a>

  <nav class="hidden lg:flex gap-6 items-center">
    <a
      href={`${lang === "es" ? "" : lang}/`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "Ir al inicio"
        : lang === "en"
          ? "Go to home"
          : "Ir para início"}
    >
      {t("nav.home")}
    </a>
    <a
      href={`${lang === "es" ? "" : lang + "/"}#about`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "¿Quien soy?"
        : lang === "en"
          ? "Whoami"
          : "Quem sou eu?"}
    >
      {
        lang === "es"
          ? "¿Quien soy?"
          : lang === "en"
            ? "Whoami"
            : "Quem sou eu?"
      }
    </a>
    <a
      href="https://wpaqc.com/podcast"
      target="_blank"
      rel="noopener noreferrer"
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target flex items-center gap-1"
      data-cursor-text={lang === "es"
        ? "Escucha el podcast"
        : lang === "en"
          ? "Listen to podcast"
          : "Ouça o podcast"}
    >
      Podcast
      <span class="material-symbols-outlined text-xs">open_in_new</span>
    </a>
    <a
      href="https://wpaqc.com/blog"
      target="_blank"
      rel="noopener noreferrer"
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target flex items-center gap-1"
      data-cursor-text={lang === "es"
        ? "Leer artículos"
        : lang === "en"
          ? "Read articles"
          : "Ler artigos"}
    >
      Blog
      <span class="material-symbols-outlined text-xs">open_in_new</span>
    </a>
    <a
      href={`${lang === "es" ? "" : lang + "/"}arquitectura`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "Oficina de Arquitectura"
        : lang === "en"
          ? "Architecture Office"
          : "Escritório de Arquitetura"}
    >
      {
        lang === "es"
          ? "Arquitectura"
          : lang === "en"
            ? "Architecture"
            : "Arquitetura"
      }
    </a>
    <a
      href={`${lang === "es" ? "" : lang + "/"}events`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "Ver eventos"
        : lang === "en"
          ? "View events"
          : "Ver eventos"}
    >
      {lang === "es" ? "Eventos" : lang === "en" ? "Events" : "Eventos"}
    </a>

    <a
      href={`${lang === "es" ? "" : lang + "/"}videos`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "Ver videos"
        : lang === "en"
          ? "Watch videos"
          : "Ver vídeos"}
    >
      Videos
    </a>

    <a
      href={`${lang === "es" ? "" : lang + "/"}skills`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "Ver habilidades"
        : lang === "en"
          ? "View skills"
          : "Ver habilidades"}
    >
      {t("nav.skills")}
    </a>
    <a
      href={`${lang === "es" ? "" : lang + "/"}resources`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "Recursos útiles"
        : lang === "en"
          ? "Useful resources"
          : "Recursos úteis"}
    >
      {lang === "es" ? "Recursos" : lang === "en" ? "Resources" : "Recursos"}
    </a>
    <a
      href={`${lang === "es" ? "" : lang + "/"}/#contact`}
      class="text-gray-400 hover:text-blue-400 transition-colors cursor-hover-target"
      data-cursor-text={lang === "es"
        ? "¡Contáctame!"
        : lang === "en"
          ? "Contact me!"
          : "Entre em contato!"}
    >
      {t("nav.contact")}
    </a>

    <div
      class="flex gap-2 border-l border-gray-600 pl-4 items-center"
    >
      <a
        href="/"
        class={`transition-all duration-300 ${lang === "es" ? "scale-110" : "opacity-60 hover:opacity-100 hover:scale-105"}`}
        aria-label="Español"
        title="Español"
      >
        <img
          src="/img/banderaColombia.png"
          alt="Español"
          class="w-7 h-7 rounded-full object-cover shadow-md"
        />
      </a>
      <a
        href="/en"
        class={`transition-all duration-300 ${lang === "en" ? "scale-110" : "opacity-60 hover:opacity-100 hover:scale-105"}`}
        aria-label="English"
        title="English"
      >
        <img
          src="/img/banderaEstadosUnidos.png"
          alt="English"
          class="w-7 h-7 rounded-full object-cover shadow-md"
        />
      </a>
      <a
        href="/pt"
        class={`transition-all duration-300 ${lang === "pt" ? "scale-110" : "opacity-60 hover:opacity-100 hover:scale-105"}`}
        aria-label="Português"
        title="Português"
      >
        <img
          src="/img/banderaBrasil.png"
          alt="Português"
          class="w-7 h-7 rounded-full object-cover shadow-md"
        />
      </a>
    </div>
  </nav>

  <button
    id="mobile-menu-btn"
    class="lg:hidden p-2 rounded-full hover:bg-primary/20"
  >
    <span class="material-symbols-outlined">menu</span>
  </button>
</header>

<div
  id="mobile-menu"
  class="hidden lg:hidden bg-background-dark border-b border-gray-700 shadow-lg"
>
  <nav class="p-4 space-y-3">
    <a
      href={`/${lang === "es" ? "" : lang}`}
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors"
    >
      {t("nav.home")}
    </a>
    <a
      href={`/${lang === "es" ? "" : lang}/skills`}
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors"
    >
      {t("nav.skills")}
    </a>
    <a
      href="https://wpaqc.com/aquicreamos"
      target="_blank"
      rel="noopener noreferrer"
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors flex items-center gap-1"
    >
      {t("nav.services")}
      <span class="material-symbols-outlined text-xs">open_in_new</span>
    </a>
    <a
      href={`/${lang === "es" ? "" : lang}/arquitectura`}
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors"
    >
      {
        lang === "es"
          ? "Arquitectura"
          : lang === "en"
            ? "Architecture"
            : "Arquitetura"
      }
    </a>
    <a
      href={`/${lang === "es" ? "" : lang}/events`}
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors"
    >
      {lang === "es" ? "Eventos" : lang === "en" ? "Events" : "Eventos"}
    </a>
    <a
      href="https://wpaqc.com/podcast"
      target="_blank"
      rel="noopener noreferrer"
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors flex items-center justify-between"
    >
      Podcast
      <span class="material-symbols-outlined text-xs">open_in_new</span>
    </a>
    <a
      href={`/${lang === "es" ? "" : lang}/videos`}
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors"
    >
      Videos
    </a>
    <a
      href="https://wpaqc.com/blog"
      target="_blank"
      rel="noopener noreferrer"
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors flex items-center justify-between"
    >
      Blog
      <span class="material-symbols-outlined text-xs">open_in_new</span>
    </a>
    <a
      href={`/${lang === "es" ? "" : lang}/resources`}
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors"
    >
      {lang === "es" ? "Recursos" : lang === "en" ? "Resources" : "Recursos"}
    </a>
    <a
      href={`/${lang === "es" ? "" : lang}/#contact`}
      class="block px-4 py-2 text-gray-400 hover:text-blue-400 hover:bg-gray-800 rounded-lg transition-colors"
    >
      {t("nav.contact")}
    </a>

    <div class="flex gap-3 pt-3 border-t border-gray-700 px-4 justify-center">
      <a
        href="/"
        class={`transition-all duration-300 ${lang === "es" ? "scale-110" : "opacity-60 hover:opacity-100 hover:scale-105"}`}
        aria-label="Español"
        title="Español"
      >
        <img
          src="/img/banderaColombia.png"
          alt="Español"
          class="w-10 h-10 rounded-full object-cover shadow-md"
        />
      </a>
      <a
        href="/en"
        class={`transition-all duration-300 ${lang === "en" ? "scale-110" : "opacity-60 hover:opacity-100 hover:scale-105"}`}
        aria-label="English"
        title="English"
      >
        <img
          src="/img/banderaEstadosUnidos.png"
          alt="English"
          class="w-10 h-10 rounded-full object-cover shadow-md"
        />
      </a>
      <a
        href="/pt"
        class={`transition-all duration-300 ${lang === "pt" ? "scale-110" : "opacity-60 hover:opacity-100 hover:scale-105"}`}
        aria-label="Português"
        title="Português"
      >
        <img
          src="/img/banderaBrasil.png"
          alt="Português"
          class="w-10 h-10 rounded-full object-cover shadow-md"
        />
      </a>
    </div>
  </nav>
</div>

<script>
  document.getElementById("mobile-menu-btn")?.addEventListener("click", () => {
    document.getElementById("mobile-menu")?.classList.toggle("hidden");
  });
</script>
